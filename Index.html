<!DOCTYPE html>
<html>
  <head>  

<style type="text/css">
      canvas {
        border: 10px solid grey; 
        padding: 0;
        margin: auto;
        display: block;
        width: 800px;
        height: 600px;
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        color: "black";
      }
  </style>
  </head>
  <body>
       <canvas id="canvas-for-ball" width="800" height="600"></canvas>
    
    <script type="text/javascript">
         // Gets a handle to the element with id canvasOne.
      var canvas = document.getElementById("canvas-for-ball");
      // Get a 2D context for the canvas.
      var ctx = canvas.getContext("2d");
      var score=0;
      var lives=3;
      
            
        
       var  paddle = {  
             X: 150
             ,Y: 550
             ,W: 125
             ,H: 35
             ,R: 20
           ,draw:function(ctx){
              ctx.strokeRect(paddle.X+(paddle.R/2), paddle.Y+(paddle.R/2),        paddle.W-paddle.R, paddle.H-paddle.R);
        ctx.fillRect(paddle.X+(paddle.R/2), paddle.Y+(paddle.R/2), paddle.W-paddle.R, paddle.H-paddle.R);     
                      
        }//draw
       }
       
       ctx.lineJoin = "round";
       ctx.lineWidth = paddle.R;    
               
      var ball = {
            x: 270
           ,y: 540
           ,r: 15
	       ,dx: 4
           ,dy:4
           ,draw:function(ctx){
           ctx.fillStyle = "red";
           ctx.beginPath();
           ctx.arc(ball.x, ball.y, ball.r, 0, 2 * Math.PI);
           ctx.fill();
           ctx.closePath();
           }         
            
      }
      
      var Brick = {
             brickRow : 9
            ,brickCol : 5
            ,bw : 75
            ,bh : 20
            ,bPad : 10
            ,brickOffsetTop : 30
            ,brickOffsetLeft : 30  
            ,drawBricks : function () {
                for(c=0; c<Brick.brickCol; c++) {
                    for(r=0; r<Brick.brickRow; r++) {
                        if(bricks[c][r].active == 1) {
                            var brickX = (r*(Brick.bw+Brick.bPad))+Brick.brickOffsetLeft;
                            var brickY = (c*(Brick.bh+Brick.bPad))+Brick.brickOffsetTop;
                            bricks[c][r].x = brickX;
                            bricks[c][r].y = brickY;
                            
                            ctx.beginPath();
                            ctx.rect(brickX, brickY, Brick.bw, Brick.bh);
                            ctx.fillStyle = "#0095DD";
                            ctx.fill();
                            ctx.closePath();
                        }
                    }
                }
            }       
            
          
      }
      var bricks = [];
                for(c=0; c<Brick.brickCol; c++) {
                    bricks[c] = [];
                        for(r=0; r<Brick.brickRow; r++) {
                           bricks[c][r] = { x: 0, y: 0, active: 1 };
                        }
                }
        
     function moveBall(){
          if(ball.x + ball.dx > canvas.width-ball.r || ball.x + ball.dx < ball.r) {
            ball.dx = -ball.dx;
        }
        if(ball.y + ball.dy < ball.r) {
            ball.dy = -ball.dy;
        }
       
        
        ball.x += ball.dx;
        ball.y += ball.dy;
     }
        function movePaddle(){
        window.addEventListener("keydown", function(event) { 
      
          
          
           if (event.keyCode == 39) {//right arrow
              if(paddle.X <canvas.width-127){
                  paddle.X+= 30;
              }     
          }
          else if (event.keyCode == 37) {//left arrow key
              if(paddle.X >0){
                  paddle.X -= 30;
              }
          }
            
          });
        }
      
      
      function collision(){
        if( ball.x<0 || ball.x>canvas.width)
	       ball.dx=-ball.dx;
	   if( ball.y<0 ||ball.y>canvas.height)
		   ball.dy=-ball.dy;   
          
        if (ball.x + ball.r < paddle.X || ball.x - ball.r > paddle.X + paddle.W)
            return;
                 
        if (ball.y + ball.r  < paddle.Y|| ball.y - ball.r > paddle.Y + paddle.H)
            return;

        else {
            ball.dy = -ball.dy;
            }    
          
	} 
        
        function collisionDetection() {
     
        for(c=0; c<Brick.brickCol; c++) {
            for(r=0; r<Brick.brickRow; r++) {
                var b = bricks[c][r];
                if(b.active == 1) {
                     if((ball.x > b.x) && (ball.x < b.x+Brick.bw) && (ball.y > b.y) && (ball.y < b.y+Brick.bh)) {
                        ball.dy = -ball.dy;
                        b.active = 0;
                        score++ 
                    }
                }
            }
        }
    }  
        function endGame(){
             
            if(score==45){
                alert("YOU WIN!");
                document.location.reload(); 
            }
             if( ball.y<0 ||ball.y>canvas.height)
                 {
                     lives--;
                     
                     ball.x = 370;
                     ball.y = 540;
                     paddle.X = 150;
                     paddle.Y = 550;
                 }
            if(lives==0){
                alert("GAME OVER YOU LOSE");
                document.location.reload(); 
            }
            
        }
        
        
     
        
        function gameloop() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);      
      paddle.draw(ctx);
      ball.draw(ctx);
      Brick.drawBricks();
      moveBall();      
      collision();
      collisionDetection();
      endGame();
 
      ctx.font="15px Arial";
      ctx.fillText("SCORE: " + score, 10, canvas.height-10);
      ctx.fillText("LIVES: " + lives, 700, canvas.height-10);
      requestAnimationFrame(gameloop); 
    }

        
        movePaddle();
        gameloop();
        
        
        
        
      
    </script>
  </body>
</html>